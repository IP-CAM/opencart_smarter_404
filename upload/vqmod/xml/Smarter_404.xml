<modification>
	<id>Smarter 404</id>
	<version>1.0</version>
	<vqmver>2.1.5</vqmver>
	<author>Jason Clark (mithereal@gmail.com</author>
<file name="catalog/controller/error/not_found.php">
	<operation><search position="after"><![CDATA[public function index() {]]></search> 
            <add><![CDATA[
				$this->load->model('catalog/url_alias');

				$request = explode("/", $_SERVER['REQUEST_URI']);
				$seourl = null;
				$seourl = $this->config->get('config_seo_url');
				
				if(($seourl)){
				$search_array = explode($request[1],'-');
				
				foreach($search_array as $s){
				//check if exists
				$result = $this->model_catalog_url_alias->getUrlAlias($s);
				
				if(($result->row-count < 0)){
				$keyword = $result->row['keyword'];
				$this->response->redirect($this->url->link('product/search', 'search=' . $keyword .'&description=true'));
				exit();
				}
				}
					
			}else{
            $this->response->redirect($this->url->link('product/search', 'search=' . $request[3] .'&description=true'));
            }
				]]></add></operation>  
</file>


</modification>
